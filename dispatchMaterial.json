{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Dispatch Material Schema",
    "type": "object",
    "description": "Dispatch material document with Header and Detail lines. Datetimes use SQL Server format: 'yyyy-MM-dd HH:mm:ss.SSS'.",
    "properties": {
      "header": {
        "type": "object",
        "properties": {
          "transactionNo": {
            "type": "string",
            "maxLength": 50,
            "description": "Primary transaction number."
          },
          "transactionDate": {
            "type": "string",
            "pattern": "^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}\\.\\d{3}$",
            "description": "Transaction date."
          },
          "dispatchTo": {
            "type": "string",
            "maxLength": 50,
            "description": "Destination; default should be \"Production\"."
          }
        },
        "required": ["transactionNo", "transactionDate", "dispatchTo"],
        "additionalProperties": false
      },
      "details": {
        "type": "array",
        "minItems": 1,
        "description": "Detail line items.",
        "items": {
          "type": "object",
          "properties": {
            "productionNo": {
              "type": "string",
              "maxLength": 25,
              "description": "Production Order number (PRO No)."
            },
            "itemCode": {
              "type": "string",
              "maxLength": 50,
              "description": "Material item code."
            },
            "qty": {
              "type": "number",
              "multipleOf": 0.0001,
              "description": "Quantity (decimal(18,4))."
            },
            "unitCode": {
              "type": "string",
              "maxLength": 10,
              "description": "Unit of measure."
            },
            "batchNo": {
              "type": "integer",
              "description": "Batch reference (from Goods Received)."
            }
          },
          "required": ["productionNo", "itemCode", "qty", "unitCode", "batchNo"],
          "additionalProperties": false
        }
      }
    },
    "required": ["header", "details"],
    "additionalProperties": false,
    "examples": [
      {
        "header": {
          "transactionNo": "DM-2025-000312",
          "transactionDate": "2025-09-20 09:30:00.000",
          "dispatchTo": "Production"
        },
        "details": [
          {
            "productionNo": "PO-24-000789",
            "itemCode": "FAB-COT-180-BLK",
            "qty": 1600.2500,
            "unitCode": "KG",
            "batchNo": 1012
          },
          {
            "productionNo": "PO-24-000789",
            "itemCode": "DYE-BLUE-01",
            "qty": 12.5000,
            "unitCode": "LTR",
            "batchNo": 1013
          }
        ]
      }
    ]
  }
  